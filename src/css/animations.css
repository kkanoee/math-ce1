/**
 * MathCE1 - Animations
 * Animations fluides 60fps pour feedback positif
 */

/* ============================================
   Page Transitions
   ============================================ */

.page-enter {
    animation: page-slide-in var(--duration-normal) ease-out;
}

.page-exit {
    animation: page-slide-out var(--duration-fast) ease-in;
}

@keyframes page-slide-in {
    from {
        opacity: 0;
        transform: translateX(20px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes page-slide-out {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(-20px);
    }
}

/* ============================================
   Fade Animations
   ============================================ */

.fade-in {
    animation: fadeIn var(--duration-normal) ease-out;
}

.fade-out {
    animation: fadeOut var(--duration-fast) ease-in;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

/* ============================================
   Scale Animations
   ============================================ */

.scale-in {
    animation: scaleIn var(--duration-normal) cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.scale-out {
    animation: scaleOut var(--duration-fast) ease-in;
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.5);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes scaleOut {
    from {
        opacity: 1;
        transform: scale(1);
    }

    to {
        opacity: 0;
        transform: scale(0.5);
    }
}

/* ============================================
   Slide Animations
   ============================================ */

.slide-up {
    animation: slideUp var(--duration-normal) ease-out;
}

.slide-down {
    animation: slideDown var(--duration-normal) ease-out;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ============================================
   Bounce Animations
   ============================================ */

.bounce {
    animation: bounce var(--duration-slow) ease-out;
}

.bounce-in {
    animation: bounceIn var(--duration-slow) cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes bounce {

    0%,
    20%,
    50%,
    80%,
    100% {
        transform: translateY(0);
    }

    40% {
        transform: translateY(-20px);
    }

    60% {
        transform: translateY(-10px);
    }
}

@keyframes bounceIn {
    0% {
        opacity: 0;
        transform: scale(0.3);
    }

    50% {
        transform: scale(1.1);
    }

    70% {
        transform: scale(0.9);
    }

    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* ============================================
   Success Celebration
   ============================================ */

.celebrate {
    animation: celebrate 0.6s ease-out;
}

@keyframes celebrate {
    0% {
        transform: scale(1);
    }

    25% {
        transform: scale(1.2) rotate(-5deg);
    }

    50% {
        transform: scale(1.3) rotate(5deg);
    }

    75% {
        transform: scale(1.1) rotate(-3deg);
    }

    100% {
        transform: scale(1) rotate(0);
    }
}

/* Star Burst Effect */
.star-burst {
    position: relative;
}

.star-burst::before,
.star-burst::after {
    content: '‚≠ê';
    position: absolute;
    font-size: 24px;
    animation: star-fly 1s ease-out forwards;
    pointer-events: none;
}

.star-burst::before {
    left: -20px;
    animation-delay: 0s;
}

.star-burst::after {
    right: -20px;
    animation-delay: 0.1s;
}

@keyframes star-fly {
    0% {
        opacity: 1;
        transform: translateY(0) scale(0.5);
    }

    50% {
        opacity: 1;
        transform: translateY(-40px) scale(1.2);
    }

    100% {
        opacity: 0;
        transform: translateY(-80px) scale(0.8);
    }
}

/* ============================================
   Pulse Effects
   ============================================ */

.pulse {
    animation: pulse-scale 2s ease-in-out infinite;
}

.pulse-ring {
    animation: pulse-ring 1.5s ease-out infinite;
}

@keyframes pulse-scale {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.05);
    }
}

@keyframes pulse-ring {
    0% {
        box-shadow: 0 0 0 0 rgba(74, 144, 217, 0.6);
    }

    70% {
        box-shadow: 0 0 0 20px rgba(74, 144, 217, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(74, 144, 217, 0);
    }
}

/* ============================================
   Shake (for errors, encouraging retry)
   ============================================ */

.shake {
    animation: shake 0.5s ease-in-out;
}

@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: translateX(-5px);
    }

    20%,
    40%,
    60%,
    80% {
        transform: translateX(5px);
    }
}

/* ============================================
   Wobble (for mascot)
   ============================================ */

.wobble {
    animation: wobble 1s ease-in-out;
}

@keyframes wobble {

    0%,
    100% {
        transform: rotate(0deg);
    }

    15% {
        transform: rotate(-10deg);
    }

    30% {
        transform: rotate(8deg);
    }

    45% {
        transform: rotate(-6deg);
    }

    60% {
        transform: rotate(4deg);
    }

    75% {
        transform: rotate(-2deg);
    }
}

/* ============================================
   Confetti Effect (for big achievements)
   ============================================ */

.confetti-piece {
    position: fixed;
    width: 12px;
    height: 12px;
    z-index: 999;
    animation: confetti-fall 3s linear forwards;
}

@keyframes confetti-fall {
    0% {
        opacity: 1;
        transform: translateY(-100vh) rotate(0deg);
    }

    100% {
        opacity: 0;
        transform: translateY(100vh) rotate(720deg);
    }
}

/* ============================================
   Loading Dots
   ============================================ */

.loading-dots {
    display: inline-flex;
    gap: 4px;
}

.loading-dots span {
    width: 8px;
    height: 8px;
    background: var(--color-primary);
    border-radius: 50%;
    animation: dot-bounce 1.4s ease-in-out infinite;
}

.loading-dots span:nth-child(1) {
    animation-delay: 0s;
}

.loading-dots span:nth-child(2) {
    animation-delay: 0.2s;
}

.loading-dots span:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes dot-bounce {

    0%,
    80%,
    100% {
        transform: scale(1);
    }

    40% {
        transform: scale(1.3);
    }
}

/* ============================================
   Listening Indicator
   ============================================ */

.listening-waves {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    height: 40px;
}

.listening-waves span {
    width: 4px;
    height: 20px;
    background: var(--color-success);
    border-radius: 2px;
    animation: wave 1s ease-in-out infinite;
}

.listening-waves span:nth-child(1) {
    animation-delay: 0s;
}

.listening-waves span:nth-child(2) {
    animation-delay: 0.1s;
}

.listening-waves span:nth-child(3) {
    animation-delay: 0.2s;
}

.listening-waves span:nth-child(4) {
    animation-delay: 0.3s;
}

.listening-waves span:nth-child(5) {
    animation-delay: 0.4s;
}

@keyframes wave {

    0%,
    100% {
        height: 20px;
    }

    50% {
        height: 40px;
    }
}

/* ============================================
   Reduce Motion (Accessibility)
   ============================================ */

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}